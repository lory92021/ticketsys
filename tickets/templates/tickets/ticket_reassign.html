{% extends "base.html" %}

{% block content %}

<div class="container mt-4">

    <h2>Riassegna Ticket #{{ ticket.id }}</h2>
    <p class="text-muted">Titolo: <strong>{{ ticket.title }}</strong></p>

    <div class="card shadow-sm mt-3">
        <div class="card-body">

            <form method="POST" action="{% url 'ticket_reassign' ticket.id %}">
                {% csrf_token %}

                <label class="form-label">Seleziona operatore</label>
                <select name="assigned_to" class="form-select mb-3">
                    <option value="">-- Nessuno (Lascia non assegnato) --</option>

                    {% for op in operators %}
                        <option value="{{ op.id }}"
                            {% if ticket.assigned_to and ticket.assigned_to.id == op.id %}selected{% endif %}>
                            {{ op.username }}
                        </option>
                    {% endfor %}
                </select>

                <button class="btn btn-primary">Conferma riassegnazione</button>
                <a href="{% url 'ticket_detail' ticket.id %}" class="btn btn-secondary">Annulla</a>
            </form>

        </div>
    </div>

</div>

{% endblock %}
